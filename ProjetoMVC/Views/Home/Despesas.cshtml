<script src="https://code.jquery.com/jquery-1.9.1.js"></script>

@{
    ViewData["Title"] = "Despesas";
}

<div id="teste" class="container" style="margin-top: 9%; margin-left:15%">
    <div class="row">
        <div class="col-9">
            <label for="exampleDataList" class="form-label">Adicionar despesas</label>
            <div class="input-group mb-3">
                <input class="form-control" list="datalistOptions" id="keywordSearch1" placeholder="Tipos da proucura...">
                <button class="btn btn-outline-secondary" type="button" id="button-addon2" onclick="addDespesas()">Confirmar</button>
                <datalist id="datalistOptions">
                    <option value="ÁGUA" />
                    <option value="ENERGIA" />
                    <option value="ALUGUEL" />
                    <option value="INTERNET" />
                    <option value="COMPRAS DO ALIMENTO" />
                </datalist>
            </div>
        </div>
       
       
        <script>
         

            const despList = [];
            let despListIndex = 1;

            $(document).ready(function () {
                $("keywordSearch1").submit(function (e) {
                    getValueList();
                    alert("Lista de Despesas: " + getListString());
                });
            });

            function addDespesas() {
                if (despList < 9) {
                    var value = keywordSearch1.value;
                    $("#teste").append(
                      
                        `<div class="col-9">
                         <div class="input-group" style="margin-top: 20px">
                            <input type="text" class="form-control" placeholder="${value}" aria-label="Recipient's username with two button addons" ${datalistOptions} readonly>
                            <button class="btn btn-success" type="button">PAGO</button>
                            <button class="btn btn-danger" type="button">NÃO PAGO</button>
                          </div>
                         </div>`
                    
                    );
                    despListIndex++;
                    console.log("chegou aqui")
                }
            }

            function getValueList() {
                for (let i = 1; i < despListIndex; i++) {
                    despList.push({
                        Despesas: $("#Despesa-" + i).val(),
                    });
                }
            }

            function getListString() {
                let result = "";Despesas
                despList.forEach((e) => {
                    result += "\nDesp: " + e.Despesas;
                });
                return result;
            }


        </script>
    </div>
</div>
